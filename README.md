# åŸºäºAndroidçš„å¤©æ°”APP

## å‰è¨€
æœ¬é¡¹ç›®ä¸ºä»–äººé¡¹ç›®ï¼Œæƒå½“æ˜¯åšä¸€ä¸ªé•œåƒå¤‡ä»½ï¼ŒåŸé¡¹ç›®åœ°å€è¯·è®¿é—®æ­¤ğŸ”— https://github.com/w77996/Weather

æ˜“çœ‹å¤©æ°”ï¼Œä¸»è¦æ˜¯ç»™å¤§å®¶å­¦ä¹ ä¸€ä¸‹ã€‚

é¡¹ç›®ä¸»è¦æ˜¯12æœˆ23æ—¥å¼€å§‹å»ºç«‹ï¼Œæ˜¥èŠ‚åŠä¸ªå¤šæœˆå›å®¶äº†ï¼Œå°±æ²¡æœ‰å†™äº†ã€‚ä¸‰æœˆåˆå®Œæˆäº†æ•´ä¸ªé¡¹ç›®ã€‚è€—æ—¶è¿‘ä¸¤ä¸ªæœˆã€‚å¹³æ—¶åœ¨å…¬å¸ä¹Ÿå°±åšç‚¹æµ‹è¯•çš„ä»»åŠ¡ï¼Œå¼€å‘çš„ä»»åŠ¡è¿˜å¾—ç­‰åˆ°æ¯•ä¸šåæ‰æœ‰TATä¸çŸ¥é“æ¯•ä¸šåä¼šä¸ä¼šè¢«ç•™ä¸‹ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯ç»ƒç»ƒæ‰‹ã€‚
åŸºäºRxjava+Retrofif+Okä¹‹åä¹Ÿå†™äº†ä¸€ä¸ªæ˜¯http+Mvpçš„é˜…è¯»ç±»APPï¼Œé“¾æ¥åœ¨è¿™é‡Œï¼š[HiReader](https://github.com/w77996/HiReader)ï¼Œé¡¹ç›®è¿˜æ²¡æœ‰å®Œå…¨å†™å®Œï¼Œä¸€ç›´åœ¨æ›´æ–°ï¼Œä¸»è¦æ˜¯è‡ªå·±å­¦ä¹ ä¸€äº›ä¸»æµçš„ä¸œè¥¿ã€‚

---

## æ„Ÿè°¢å¼€æº
çœ‹åˆ«äººçš„ä»£ç æ…¢æ…¢å­¦ä¹ ï¼Œä½ ä¼šçœ‹åˆ°è‡ªå·±çš„æˆé•¿çš„~
ç°åœ¨çš„æˆ‘çœ‹è¿™ä¸ªæ¯•ä¸šè®¾è®¡é¡¹ç›®ä¼šè§‰å¾—æ²¡æœ‰å½“åˆæƒ³çš„é‚£ä¹ˆéš¾äº†ï¼Œå¯ä»¥ç”¨æ›´é«˜çš„æ•ˆç‡ï¼Œæ›´å¥½çš„æ–¹å¼å»å®ç°è¿™ä¸ªé¡¹ç›®ã€‚
### å€Ÿé‰´è¿‡çš„é¡¹ç›®
[å°±çœ‹å¤©æ°”](https://github.com/xcc3641/SeeWeather)

[é«˜ä»¿é›…è™å¤©æ°”](http://blog.csdn.net/way_ping_li/article/details/38963807)

è¿˜æœ‰éƒ­ç¥çš„ç¬¬äºŒè¡Œä»£ç ï¼Œä¸è§£é‡Š
### å¼€æºæ¡†æ¶
- Butterknifeæ³¨è§£å¼æ¡†æ¶ http://jakewharton.github.io/butterknife/
- Glideå›¾ç‰‡åŠ è½½æ¡†æ¶ https://github.com/bumptech/glide 
- Okhttpç½‘ç»œè¯·æ±‚æ¡†æ¶ http://square.github.io/okhttp/ 
- LitePalæ•°æ®åº“æ“ä½œæ¡†æ¶ https://github.com/LitePalFramework/LitePal 
- Logger å¼€å‘æ—¥å¿—æ¡†æ¶ https://github.com/orhanobut/logger 
- Gson jsonæ•°æ®è§£ææ¡†æ¶ https://github.com/google/gson 
- SlidingMenuä¾§æ‹‰èœå•æ¡†æ¶ https://github.com/jfeinstein10/SlidingMenu 
- SwipeMenuListViewä¾§æ»‘åˆ é™¤æ¡†æ¶ https://github.com/baoyongzhang/SwipeMenuListView/ 
- æ˜“æºæ•°æ®æä¾›çš„å¤©æ°”æ•°æ® https://www.showapi.com/ 
- æå…‰æ¨é€æœåŠ¡ https://www.jiguang.cn/accounts/platform 
- æœ‰ç±³å¹¿å‘Šå¹³å° https://www.youmi.net/ 
- é«˜å¾·åœ°å›¾ http://lbs.amap.com/ 

---
# åŠŸèƒ½
1. ç¬¬ä¸€æ¬¡æ‰“å¼€APPå¼•å¯¼é¡µï¼Œç¼“å†²åŠ è½½
2. å¤©æ°”ä¿¡æ¯çš„æ˜¾ç¤º
3. å¹¿å‘Šï¼Œæ¨é€
4. æ¡Œé¢å°å·¥å…·
5. æ–°é—»èµ„è®¯çš„æŸ¥çœ‹
6. è“ç‰™ä¸²å£ä¼ è¾“æ¸©åº¦
---

é‚£æ—¶å€™è¿˜ä¸å¤§ä¼šä½¿ç”¨Gson,ç®€ç›´å°±æ˜¯Androidå¼€å‘çš„è´¥ç¬”å‘€~å‚»ä¹ä¹çš„è‡ªå·±å»è§£æè¿‘åƒçš„jsonä¿¡æ¯ï¼Œä¹Ÿæ˜¯é†‰äº†ã€‚
# å‡†å¤‡
æ˜“æºæ•°æ®ä¸­çš„å¤©æ°”Jsonå¦‚æœè¯·æ±‚çš„æ˜¯15å¤©çš„Jsonæ•°æ®é‚£æœ‰è¿‘åƒè¡Œï¼Œæ‰€ä»¥å–è‡ªå·±æœ‰ç”¨çš„ã€‚



- å¼€å‘ç¯å¢ƒï¼šAndroid studio
- æ•°æ®è·å–ï¼šæ˜“æºæ•°æ®SDK
## å¸®åŠ©å·¥å…·
[Jsonåœ¨çº¿è§£æ](http://www.json.cn/)

[æ˜“æºæ•°æ®å®˜ç½‘](https://www.showapi.com/)

---

# Jsonæ•°æ®åˆ†æ


![image](http://img.blog.csdn.net/20161201125159764)

è¿™ä¹ˆå¤šJson,ç»†æ€ææå•Š~
ä¸è¿‡æˆ‘ä»¬ä¸€æ­¥æ­¥æ¥åˆ†æï¼Œkeyçš„ä½œç”¨å¯ä»¥çœ‹æ˜“æºçš„æ–‡æ¡£ã€‚
1. cityInfo åŸå¸‚ä¿¡æ¯
2. time  æ—¶é—´
3. now  ç°åœ¨çš„å¤©æ°”
4. f1~f6  è¿‘ä¸€æ˜ŸæœŸçš„å¤©æ°”é¢„æŠ¥ä¿¡æ¯
5. alarmList  é¢„è­¦ä¿¡æ¯
6. hourDataList  åŠå°æ—¶æ›´æ–°ä¸€æ¬¡çš„å¤©æ°”ä¿¡æ¯
7. aqi  ç©ºæ°”è´¨é‡


## å¤©æ°”å°è£…
åœ¨ç›®å½•ä¸‹æ–°å»ºcom.weather.entity

å…¶å®è§‰å¾—GsonæŒºå¥½ç”¨çš„â€¦â€¦
é‚£æˆ‘ä¸ºä½•ä¸ç”¨Gsonå‘¢ã€‚ã€‚ã€‚å› ä¸ºé‚£æ—¶å€™è¿˜ä¸ä¼šç”¨@Serializednameï¼Œæ˜“æºæ•°æ®çš„jsonç«Ÿç„¶è¿˜æœ‰ç”¨æ•°å­—å¼€å¤´çš„key  â”­â”®ï¹â”­â”®

ç„¶åç»è¿‡äº†ä¸€ç•ªçš„å€’è…¾ï¼Œç»ˆäºä¸€ä¸ªä¸ªæŠŠæ•°æ®ç»™å¯¹ä¸Šäº†= =ï¼Œå½“åšè‡ªå·±è§£æjsonæ•°æ®çš„ç»ƒæ‰‹å§


## ç½‘ç»œè¯·æ±‚
ä¸»è¦æ˜¯ç”¨okhttpï¼Œç”¨åˆ°çš„æ˜¯éƒ­ç¥çš„å‡ è¡Œä»£ç 


```
 public static void sendOkHttpRequest(String address, okhttp3.Callback callback) {
        OkHttpClient client = new OkHttpClient();
        Request request = new Request.Builder().url(address).build();
        client.newCall(request).enqueue(callback);
    }
    
```
ç›´æ¥ä¼ å…¥åœ°å€å°±è¯·æ±‚åˆ°æ•°æ®äº†ï¼Œ

ä¸è¿‡è¿™è¾¹æœ‰ä¸ªå‘ï¼ï¼
æœ‰ä¸ªå‘ï¼ï¼ï¼

æœ‰ä¸ªå‘ï¼ï¼ï¼

é‡è¦çš„äº‹æƒ…æ‰€ä¸‰é

åœ¨è¯·æ±‚åä¸èƒ½ç›´æ¥ä½¿ç”¨response.body().string(),è¦ç¼“å­˜ä¸€ä¸‹æ‰èƒ½ä½¿ç”¨ï¼Œä¸ç„¶ä¸ºç©ºã€‚
```
  //ä½¿ç”¨okhttpçš„å°è£…è¿›è¡Œè¯·æ±‚
        HttpUtil.sendOkHttpRequest(weatherUrl, new Callback() {
            @Override
            public void onResponse(Call call, Response response) throws IOException {
                //è¿™é‡Œæœ‰å‘
                String responseText = response.body().string();
```

## æ•°æ®åº“

æœ¬äººæ•°æ®åº“è¶…çº§çƒ‚ï¼Œä¸è¿‡ä¸ç®—æ¸£æ¸£ï¼Œè¿˜æ˜¯èƒ½å†™ç‚¹ä¸œè¥¿ï¼Œæ•°æ®åº“æˆ‘è®¾è®¡çš„ååˆ†ç®€å•ï¼Œåªæœ‰ä¸¤ä¸ªé‡è¦çš„å±æ€§ï¼Œå°±æ˜¯åŸå¸‚åå’Œjsonæ•°æ®ï¼Œä¸ºçš„æ˜¯åœ¨æ— ç½‘ç»œçŠ¶æ€ä¸‹ä»æ•°æ®åº“ç›´æ¥è·å–åˆ°jsonæ•°æ®ï¼Œè§£æåæ˜¾ç¤ºåˆ°ç•Œé¢ä¸Šã€‚
æ¡†æ¶çš„è¯æœ¬æ¥æ‰“ç®—ç”¨GreenDaoçš„ï¼Œä¸è¿‡åé¢æ”¹æˆLitePaläº†ã€‚

```
public class WeatherDB extends DataSupport {
    public int id;
    public String mCityName;
    public String mJsonData;
    ...
    
```
## å¹¿å‘Šï¼Œæ¨é€
å¹¿å‘Šç”¨çš„æ˜¯æœ‰ç±³å¹¿å‘Šï¼Œç›´æ¥å¯¹ç€SDKæŠŠä»£ç åŠ è¿›å»å°±å¥½äº†ï¼Œæƒ³ç”¨è…¾è®¯çš„å¹¿å‘Šï¼Œä½†æ˜¯æ‰“ç”µè¯ç»™æˆ‘é—®æˆ‘æœ‰æ²¡è¥ä¸šæ‰§ç…§ã€‚ã€‚ã€‚ã€‚æ™•ï¼Œæ²¡æœ‰æ‰€ä»¥æ²¡æœ‰å®¡æ ¸é€šè¿‡ã€‚

æ¨é€ä½¿ç”¨çš„æ˜¯æå…‰æ¨é€ï¼Œä¹Ÿæ˜¯ç›´æ¥ä½¿ç”¨SDK,æœ¬æ¥ä½¿ç”¨çš„æ˜¯BOMBçš„ï¼Œä½†æ˜¯Bomb SDKä¸­çš„okhttpå’Œæˆ‘è‡ªå·±çš„ä¾èµ–èµ·å†²çªäº†ï¼Œè€Œä¸”è¿˜æœ‰ä¸€äº›æœºå­æ— æ³•æ¨é€æˆåŠŸï¼Œæ‰€ä»¥æœ€åæ”¹æˆäº†æå…‰æ¨é€ï¼Œè¿™éƒ½æ˜¯è¡€æ·‹æ·‹çš„å‘å•Šï¼Œä¸€æ­¥æ­¥è¸©è¿‡æ¥ç®€ç›´åè¡€ã€‚

```
    //å¹¿å‘Šæ¡åˆå§‹åŒ–
        View bannerView = BannerManager.getInstance(WeatherActivity.this)
                .getBannerView(WeatherActivity.this, new BannerViewListener() {
                    @Override
                    public void onRequestSuccess() {}
                    @Override
                    public void onSwitchBanner() {}
                    @Override
                    public void onRequestFailed() {}
                });
        // è·å–è¦åµŒå…¥å¹¿å‘Šæ¡çš„å¸ƒå±€
        LinearLayout bannerLayout = (LinearLayout) findViewById(R.id.ll_banner);
        // å°†å¹¿å‘Šæ¡åŠ å…¥åˆ°å¸ƒå±€ä¸­
        bannerLayout.addView(bannerView);
```
åµŒå…¥å¹¿å‘Šå°±æ˜¯è¿™ä¹ˆç®€å•æš´åŠ›ï¼Œä½†æ˜¯å»ºè®®ç”¨ç§¯åˆ†å¢™ï¼Œæˆ‘è¿™ä¸ªæ˜¯å¹¿å‘Šæ¡ã€‚ã€‚ã€‚ã€‚ã€‚

å› ä¸ºã€‚ã€‚ã€‚
ä»–ä»¬å¹¿å‘Šæ¡å¥½åƒæ²¡å•¥å¹¿å‘Šã€‚ã€‚ã€‚å¯èƒ½åœ¨å®é™…ä¸­æ˜¾ç¤ºä¸å‡ºæ¥ï¼Œä¸è¿‡åœ¨åˆå§‹åŒ–æ—¶ä½¿ç”¨æµ‹è¯•å¹¿å‘Šçš„è¯é‚£å°±å¯ä»¥çœ‹åˆ°äº†ã€‚



## åŸå¸‚é€‰æ‹©
è¿™é‡Œæ¨èåˆ«äººå†™çš„ä¸€ä¸ªä¾èµ–ï¼Œç›´æ¥ä¼ é€é—¨ [CityPicker](https://github.com/zaaach/CityPicker)

ç”¨çš„æ˜¯é«˜å¾·åœ°å›¾å®šä½
![image](https://raw.githubusercontent.com/w77996/BlogsImage/master/MoreKonwWeather/F31138F211A4AAC11E58A2579BF321BA.jpg)

## æ¡Œé¢å°å·¥å…·
è¿™æ–¹é¢æˆ‘éœ€è¦å­¦ä¹ çš„ä¸œè¥¿è¿˜æœ‰å¾ˆå¤šçš„ï¼Œå¼€å¯æœåŠ¡åœ¨åå°æ›´æ–°ï¼Œæƒ³æƒ³åæœŸå¦‚æœèƒ½åŠ å…¥Rxjavaï¼Œçœ‹çœ‹èƒ½ä¸èƒ½ä¼˜åŒ–ä¸€äº›æ“ä½œï¼Œä¸è¿‡åœ¨ä½¿ç”¨GlideåŠ è½½å›¾ç‰‡åˆ°AppWidgetæ—¶éœ€è¦è·å–åˆ°ImageViewæ§ä»¶ï¼Œæ‰€ä»¥æœ‰æŠ˜è…¾äº†ä¸€ä¸‹ã€‚
![image](https://raw.githubusercontent.com/w77996/BlogsImage/master/MoreKonwWeather/D3D307BF3279B61CF6206E23E7335A5F.jpg)


```
   //é€šè¿‡APPWIdgetTargetè·å–åˆ°Imageæ§ä»¶
                 mAppWidgetTarget =new AppWidgetTarget(getApplicationContext(),mRemoteViews,R.id.appwiget_picture,mAppwidgetId);
                Glide.with(getApplicationContext()).load(weatherBean.getmNowWeatherBean().getmWeather_Pic()).asBitmap().into(mAppWidgetTarget);
```

## è“ç‰™å’Œå•ç‰‡æœºé€šä¿¡æ¨¡å—
å› ä¸ºæœ¬äººå­¦è¿‡åµŒå…¥å¼å¼€å‘ï¼Œåœ¨æœºç¼˜å·§åˆçš„æ—¶å€™æ¥è§¦äº†Androidï¼Œæ‰€ä»¥ç°åœ¨åšAndroidå¼€å‘ï¼Œå•ç‰‡æœºä¸Šä½¿ç”¨çš„æ˜¯DS18B20æ¸©åº¦ä¼ æ„Ÿå™¨ï¼Œè“ç‰™æ˜¯HC-05,é€šè¿‡ä¸²å£è¿›è¡Œæ¸©åº¦ä¼ è¾“ï¼Œä¸è¦è§‰å¾—å¾ˆéš¾ï¼Œå…¶å®å¾ˆç®€å•ï¼Œå—¯ï¼Œè¯´ç¬‘çš„ï¼ŒåŸºç¡€å¥½å°±å¾ˆç®€å•å•¦ï¼Œä»£ç å¹¶ä¸å¤šï¼Œæ›¾ç»è¯•è¿‡ä¸€æ¬¡è¿”å›æ•°æ®ä¸€ç›´éƒ½æ˜¯ä¹±ç ï¼Œæ‰¾äº†ä¸€ä¸ªæ˜ŸæœŸçš„é—®é¢˜éƒ½æ²¡æ‰¾åˆ°ï¼Œæœ€åå‘ç°æ˜¯æ³¢ç‰¹ç‡çš„é—®é¢˜ï¼Œå¤ªæ„ŸåŠ¨äº†ï¼Œ[ä¼ é€é—¨](http://note.youdao.com/)
## ç•Œé¢
è¿›å…¥APPåŠ è½½ç•Œé¢ï¼Œæ·¡å…¥æ·¡å‡ºæ•ˆæœï¼Œå¼±å¼•ç”¨æŒæœ‰Activityå¯¹è±¡ï¼Œæ–‡å­—åŠ¨ç”»æ•ˆæœ
![ç¼“å†²ç•Œé¢](https://raw.githubusercontent.com/w77996/BlogsImage/master/MoreKonwWeather/11100A500F4EDDA45C3461786DB02552.jpg)

```
  //activityåˆ‡æ¢çš„æ·¡å…¥æ·¡å‡ºæ•ˆæœ
       overridePendingTransition(android.R.anim.fade_in, android.R.anim.fade_out);
       
```

```
//å¼±å¼•ç”¨çš„ä½¿ç”¨
 private static class SwitchHandler extends Handler {
        private WeakReference<SplashActivity> mWeakReference;

        SwitchHandler(SplashActivity activity) {
            mWeakReference = new WeakReference<SplashActivity>(activity);
        }

        @Override
        public void handleMessage(Message msg) {
            SplashActivity activity = mWeakReference.get();
            if (activity != null) {
                WeatherActivity.launch(activity);
                activity.finish();
            }
        }
    }
```
## ä¸»ç•Œé¢
![image](https://raw.githubusercontent.com/w77996/BlogsImage/master/MoreKonwWeather/2F981EF1CC18B1F1945AF9B93BFD0FCA.jpg)

è¿™è¾¹å…¶å®æ²¡æœ‰æŒ‰ç…§Material designçš„è¦æ±‚é€æ˜åŒ–çŠ¶æ€æ ï¼Œä¸»ç•Œé¢å¡«å……æ•´ä¸ªæ‰‹æœºå±å¹•ï¼Œé€šè¿‡è®¡ç®—æ‰‹æœºå±å¹•æ€»é«˜åº¦ï¼Œå‡å»çŠ¶æ€æ çš„é«˜åº¦å’ŒActionBarçš„é«˜åº¦ï¼Œå¾—å‡ºäº†ä¸»ç•Œé¢è§†å›¾çš„é«˜åº¦ï¼Œå°±åšåˆ°äº†åœ¨ä»»ä½•åˆ†è¾¨ç‡ä¸‹éƒ½åªæ˜¾ç¤ºè¿™æ ·çš„ç•Œé¢çš„æ•ˆæœï¼ˆåŸè°…æˆ‘è¿™ç§æ‹—å£çš„è¡¨è¾¾ï¼Œä½ æ‡‚å°±å¥½å“ˆå“ˆå“ˆå“ˆ~~ï¼‰

```
  /**
     * è·å–æ‰‹æœºå±å¹•é«˜åº¦
     *
     * @param context
     * @return
     */
    public static int getDisplayHeight(Context context) {
        WindowManager wm = (WindowManager) context
                .getSystemService(Context.WINDOW_SERVICE);
        DisplayMetrics dm = new DisplayMetrics();
        // è·å–å±å¹•ä¿¡æ¯
        wm.getDefaultDisplay().getMetrics(dm);
        return dm.heightPixels;
    }

    /**
     * è·å–æ‰‹æœºå±å¹•å®½åº¦
     *
     * @param context
     * @return
     */
    public static int getDisplayWidth(Context context) {
        WindowManager wm = (WindowManager) context
                .getSystemService(Context.WINDOW_SERVICE);
        DisplayMetrics dm = new DisplayMetrics();
        // è·å–å±å¹•ä¿¡æ¯
        wm.getDefaultDisplay().getMetrics(dm);
        return dm.widthPixels;
    }

    /**
     * åå°„æ–¹æ³•è·å–çŠ¶æ€æ é«˜åº¦
     *
     * @param context
     * @return
     */
    public static int getStatusBarHeight(Context context) {
        int statusBarHeight = 20;
        try {
            Class<?> _class = Class.forName("com.android.internal.R$dimen");
            Object object = _class.newInstance();
            Field field = _class.getField("status_bar_height");
            int restult = Integer.parseInt(field.get(object).toString());
            statusBarHeight = context.getResources().getDimensionPixelSize(
                    restult);
        } catch (Exception e) {
            e.printStackTrace();
        }
        // Toast.makeText(getActivity(), "StatusBarHeight = " + statusBarHeight,
        // Toast.LENGTH_SHORT).show();
        return statusBarHeight;
    }

    /**
     * è·å–?attr/actionBarSizeé«˜åº¦
     *
     * @param context
     * @return
     */
    public static int getActionBarSize(Context context) {
        TypedValue typedValue = new TypedValue();
        context.getTheme().resolveAttribute(R.attr.actionBarSize, typedValue, true);
        int actionBarHeight = TypedValue.complexToDimensionPixelSize(typedValue.data, context.getResources().getDisplayMetrics());
        return actionBarHeight;
    }
        // mNowWeatherHeighté«˜åº¦=å±å¹•é«˜åº¦-æ ‡é¢˜æ é«˜åº¦-çŠ¶æ€æ é«˜åº¦
        mNowWeatherHeight = SystemUtils.getDisplayHeight(mContext) - SystemUtils.getActionBarSize(mContext) - SystemUtils.getStatusBarHeight(mContext);
```

## æ¯åŠå°æ—¶æ›´æ–°çš„æ•°æ®listå’Œæœªæ¥å¤©æ°”é¢„æŠ¥
è¿™è¾¹æ˜¯RecyclerView,åœ¨ç»˜åˆ¶æ¯ä¸ªItemçš„æ—¶å€™ä¹Ÿæ˜¯è®¡ç®—äº†å±å¹•çš„å®½åº¦ï¼Œæ¯ä¸ªitemå å±å¹•çš„1/5ï¼Œæ‰€ä»¥
## ç©ºæ°”æŒ‡æ•°å’Œç”Ÿæ´»æŒ‡æ•°

UI å¾ˆå¤šéƒ½æ˜¯ä»Android Studioä¸­çš„Vetor asserté‡Œé¢æ‰¾çš„ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥å»æ‰¾æ‰¾é€‚åˆè‡ªå·±çš„UI,è¿˜æœ‰é˜¿é‡Œçš„iconfont[é˜¿é‡Œå·´å·´çŸ¢é‡å›¾æ ‡åº“](http://www.iconfont.cn/)

![image](https://raw.githubusercontent.com/w77996/BlogsImage/master/MoreKonwWeather/7BF01413872517AF752776C47756FDAE.jpg)

## åŸå¸‚ç¼–è¾‘ç•Œé¢

èƒŒæ™¯ActivityåŠé€æ˜ï¼Œå¡«å……å±å¹•ï¼Œlistviewä¾§æ»‘åˆ é™¤

è¿›å…¥Activityåä»æ•°æ®åº“ä¸­è·å–åˆ°æ•°æ®ï¼Œç„¶åæ˜¾ç¤ºåˆ°listviewä¸­ï¼Œè¿›è¡Œæ“ä½œåå†ä¸»ç•Œé¢çš„onActivityResultä¸­é‡æ–°è·å–æ•°æ®åº“ä¸­çš„å†…å®¹ï¼Œæ›´æ–°UI.

![image](https://raw.githubusercontent.com/w77996/BlogsImage/master/MoreKonwWeather/9CE5A2FCAC8C42F173BA51D0CC75F2AB.jpg)


``` 
//ä¾§æ»‘åˆ é™¤
SwipeMenuCreator creator = new SwipeMenuCreator() {
            @Override
            public void create(SwipeMenu menu) {
                SwipeMenuItem openItem = new SwipeMenuItem(
                        getApplicationContext());
                SwipeMenuItem deleteItem = new SwipeMenuItem(
                        getApplicationContext());
                deleteItem.setBackground(new ColorDrawable(Color.rgb(0xF9,
                        0x3F, 0x25)));
                deleteItem.setWidth(dp2px(60));
                deleteItem.setIcon(R.drawable.ic_delete);
                menu.addMenuItem(deleteItem);

            }
        };
        mCityEditListview.setMenuCreator(creator);
        mCityEditListview.setOnMenuItemClickListener(new SwipeMenuListView.OnMenuItemClickListener() {
            @Override
            public boolean onMenuItemClick(int position, SwipeMenu menu, int index) {
                switch (index) {
                    case 0:
                        // open
                        Toast.makeText(getApplicationContext(), position + " menu click", Toast.LENGTH_SHORT).show();
                        if(mCityList.size()>1){
                            CityRmoveThread cityRmoveThread = new CityRmoveThread(mCityList.get(position).getmCityName());
                            cityRmoveThread.start();
                            mCityList.remove(position);
                            mCityEditListAdapter.notifyDataSetChanged();
                        }else{
                            Toast.makeText(getApplicationContext(), position + " äº²ï¼Œåˆ é™¤äº†ä½ çœ‹å•¥ï¼Ÿ", Toast.LENGTH_SHORT).show();
                        }
                        break;
                }
                // false : ä¼šå…³é—­èœå•; true ï¼šä¸ä¼šå…³é—­èœå•
                return false;
            }
        });

```
## æ–°é—»ï¼Œç¬‘è¯ï¼Œç¾å›¾
è¿™ä¸ªæ¨¡å—å†™çš„è¯´å®è¯æˆ‘è‡ªå·±éƒ½çœ‹ä¸ä¸‹å»äº†ï¼Œé‚£æ—¶å€™ä¸ºäº†èµ¶è¿›åº¦ï¼Œï¼Œå“ï¼Œæ„æ€ä¸€ä¸‹ã€‚ç”¨çš„æ˜¯sharepreferenceè¿›è¡Œå¾ˆç®€å•çš„å­˜å‚¨ã€‚å—¯ï¼Œå°±æ˜¯è¿™æ ·çš„



# æ€»ç»“

ä»…ä¾›å‚è€ƒï¼Œä¸å¾—ç”¨äºå•†ä¸šé¡¹ç›®ï¼Œå¦‚æœè§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œç»™ä¸ªStarå§äº²~
